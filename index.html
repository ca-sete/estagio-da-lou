<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Status do Estágio e Frase do Dia</title>
    <style>
        /* Estilo para o widget */
        body {
            font-family: 'Comic Sans MS', sans-serif;
            background-color: #FFFAE3;
            color: #333;
            text-align: center;
            padding: 20px;
        }
        #widget {
            background-color: #FFF;
            border: 2px solid #FFD700;
            padding: 20px;
            margin: 0 auto;
            width: 80%;
            max-width: 400px;
            border-radius: 15px;
            box-shadow: 0 0 10px #999;
        }
        h2 {
            color: #FF4500;
            text-shadow: 1px 1px 2px #FFA500;
            font-size: 24px;
        }
        p {
            font-size: 16px;
            color: #333;
            margin-top: 10px;
        }

        /* Estilo para o título da frase do dia */
        .colorful-title {
            display: inline-block;
            font-size: 24px;
            text-transform: lowercase;
        }

        /* Estilo para as imagens */
        .image-box {
            margin-top: 30px;
            position: relative;
        }
        .image-box img {
            width: 100%;
            max-width: 600px;
            height: auto;
            max-height: 400px;
        }
        .image-box p {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: yellow;
            text-shadow: 2px 2px 4px black;
            font-weight: bold;
            font-size: 20px;
            text-align: center;
            width: 90%;
        }
    </style>
</head>
<body>

    <div id="widget">
        <h2>Status do Estágio</h2>
        <p id="time-left-today"></p>
        <p id="time-left"></p>
        <p id="work-status"></p>
        <p id="end-date"></p>
    </div>

    <div class="image-box">
        <span class="colorful-title" id="frase-titulo"></span></br>
        <img id="frase-imagem" src="" alt="frase do dia imagem">
        <p id="frase-texto"></p>
    </div>

    <script>
        const totalHours = 224;  // Total de horas do estágio
        const startHour = 8;     // Hora de início do expediente
        const endHour = 17;      // Hora de fim do expediente
        const lunchStart = 12;   // Início do almoço
        const lunchEnd = 13;     // Fim do almoço
        const hoursPerDay = 8;   // Total de horas úteis por dia de trabalho
        const daysPerWeek = 5;   // Quantidade de dias úteis por semana
        const workedHours = 24;  // Horas já trabalhadas

        // Função para verificar se hoje é um dia útil (de segunda a sexta-feira)
        function isWorkingDay(date) {
            const day = date.getDay();
            return day >= 1 && day <= 5; // De segunda a sexta-feira
        }

        // Função para calcular as horas trabalhadas até o momento no dia atual
        function calculateHoursWorkedToday() {
            const now = new Date();
            if (!isWorkingDay(now)) return 0;  // Se for sábado ou domingo, retorna 0

            const currentHour = now.getHours();
            let hoursWorked = 0;

            if (currentHour >= startHour && currentHour < lunchStart) {
                // Se for antes do almoço, calcula as horas da manhã
                hoursWorked = currentHour - startHour;
            } else if (currentHour >= lunchEnd && currentHour < endHour) {
                // Se for depois do almoço, calcula horas trabalhadas de manhã e tarde
                hoursWorked = (lunchStart - startHour) + (currentHour - lunchEnd);
            } else if (currentHour >= endHour) {
                // Se já passou do fim do expediente
                hoursWorked = hoursPerDay;
            }

            return hoursWorked;
        }

        // Função para calcular as horas restantes do estágio
        function calculateRemainingHours() {
            const now = new Date();
            const totalDaysWorked = Math.floor((now - new Date(2024, 8, 10)) / (1000 * 60 * 60 * 24));
            let workedDays = 0;
            let remainingHours = totalHours - workedHours;

            // Verifica quantos dias úteis foram trabalhados até agora
            for (let i = 0; i <= totalDaysWorked; i++) {
                const date = new Date(now.getTime() - (i * 24 * 60 * 60 * 1000));
                if (isWorkingDay(date)) workedDays++;
            }

            // Calcula as horas já trabalhadas considerando os dias úteis e as horas de hoje
            const totalWorkedHours = (workedDays * hoursPerDay) + calculateHoursWorkedToday();
            remainingHours -= totalWorkedHours;

            return remainingHours > 0 ? remainingHours : 0;
        }

        // Função para calcular as horas restantes no expediente de hoje
        function calculateRemainingHoursToday() {
            const now = new Date();
            if (!isWorkingDay(now)) return "Não há expediente hoje.";

            const currentHour = now.getHours();
            let remainingHoursToday = 0;

            if (currentHour < startHour) {
                remainingHoursToday = hoursPerDay;  // Antes do expediente
            } else if (currentHour >= startHour && currentHour < lunchStart) {
                remainingHoursToday = endHour - currentHour - 1;  // Antes do almoço
            } else if (currentHour >= lunchEnd && currentHour < endHour) {
                remainingHoursToday = endHour - currentHour;  // Após o almoço
            } else if (currentHour >= endHour) {
                return "O expediente de hoje já acabou.";  // Após o expediente
            }

            return `Faltam ${remainingHoursToday} horas para acabar o expediente de hoje.`;
        }

        // Função para exibir as horas restantes no expediente de hoje
        function updateTimeLeftToday() {
            const timeLeftTodayMessage = calculateRemainingHoursToday();
            document.getElementById("time-left-today").innerText = timeLeftTodayMessage;
        }

        // Função para exibir as horas restantes do estágio
        function updateRemainingHours() {
            const remainingHours = calculateRemainingHours();
            const timeLeftMessage = `Faltam ${remainingHours} horas úteis para o fim do estágio.`;
            document.getElementById("time-left").innerText = timeLeftMessage;
        }

        // Função para calcular o último dia de trabalho, baseado nas horas restantes
        function calculateLastDay(remainingHours) {
            let date = new Date();
            while (remainingHours > 0) {
                date.setDate(date.getDate() + 1);
                if (isWorkingDay(date)) remainingHours -= hoursPerDay;
            }
            return date;
        }

        // Função para formatar a data em português
        function formatDate(date) {
            const options = { day: 'numeric', month: 'long' };
            return date.toLocaleDateString('pt-BR', options);
        }

        // Função para atualizar a data final do estágio
        function updateEndDate() {
            const remainingHours = calculateRemainingHours();
            const lastDay = calculateLastDay(remainingHours);
            document.getElementById("end-date").innerText = `Último dia de estágio: ${formatDate(lastDay)} ☠️`;
        }

        // Função para alternar as cores das letras do título "frase do dia"
        function alternarCoresTitulo() {
            const titulo = "frase do dia";
            let colors = ["red", "green", "blue", "purple", "orange", "pink"];
            let coloredTitle = "";
            for (let i = 0; i < titulo.length; i++) {
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                coloredTitle += `<span style="color: ${randomColor}">${titulo[i]}</span>`;
            }
            document.getElementById("frase-titulo").innerHTML = coloredTitle;
        }

        // Lista de frases do dia (expansão)
        const frases = [
            "Trabalhe duro em silêncio e deixe o sucesso fazer barulho!",
            "Não há atalhos para o topo da montanha.",
            "A persistência é o caminho do êxito.",
            "Pequenos progressos diários levam a grandes resultados.",
            "Cada passo, por menor que seja, é um passo em direção ao seu objetivo.",
            "O sucesso é a soma de pequenos esforços repetidos dia após dia.",
            "Acredite no processo. Tudo o que você faz hoje está construindo seu amanhã.",
            "Levante, trabalhe e repita. Isso é o que traz resultados.",
            "A ação é a chave para o sucesso!",
            "Determinação hoje, realização amanhã!",
            "Nunca desista, pois o que você planta hoje colherá amanhã.",
            "Sucesso é resultado de preparação, trabalho duro e aprender com os fracassos.",
            "Transforme desafios em oportunidades!",
            "Cada dia é uma nova chance de ser melhor que ontem.",
            "Vá firme na direção dos seus sonhos!",
            "O trabalho duro supera o talento quando o talento não trabalha duro.",
            "A grandeza não vem do que você faz ocasionalmente, mas do que você faz consistentemente.",
            "Sua única limitação é você mesmo. Vá além!",
            "Suas ações de hoje determinam o seu futuro de amanhã.",
            "A disciplina é o melhor caminho para o sucesso duradouro."
        ];

        // Lista de URLs das imagens
        const imagens = [
            "https://www.syfy.com/sites/syfy/files/2021/06/shrekfest-shrek-super-slam.png",
            "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcREsT_cVhOLHriUK8IiafGoPNSXFSy2MyVe5XKA4fBIjfyOK2-CxOa0h9JUs_XDr9xE-X8&usqp=CAU",
            "https://content.imageresizer.com/images/memes/smart-shrek-meme-5.jpg",
            "https://p19-pu-sign-useast8.tiktokcdn-us.com/tos-useast5-p-0068-tx/8ddd7fb0fc5a4640abe36b9ba61be215_1671160550~tplv-photomode-zoomcover:480:480.jpeg?lk3s=b59d6b55&x-expires=1726225200&x-signature=Hr9OkJ9qoqEkwx7gdO8P8NDmQtc%3D&shp=b59d6b55&shcp=-",
            "https://i.pinimg.com/736x/12/82/1a/12821aef23d6a0615e08d056bf5018e1.jpg",
            "https://community-lens.storage.googleapis.com/preview-media/thumbnail_poster/b4d7248b-a249-4d55-9b39-067ee820f884.jpg",
            "https://www.theoakleafnews.com/wp-content/uploads/2021/04/shrek_and_donkey_face_swap___by_ogreboi21savage_dbddmc7-fullview.jpg",
            "https://orcatalks.wordpress.com/wp-content/uploads/2020/10/photo_2020-10-25_22-05-00.jpg?w=1200&h=715&crop=1",
            "https://uploads.dailydot.com/2018/09/shrek_what_are_you_doing_swamp.png?auto=compress&fm=png",
            "https://image-pastemagazine-com-public-bucket.storage.googleapis.com/wp-content/uploads/2022/06/21060547/shrek_irony_main.jpg"
        ];

        // Função para exibir uma frase e imagem aleatória
        function exibirFraseDoDia() {
            const fraseIndex = Math.floor(Math.random() * frases.length);
            const imagemIndex = Math.floor(Math.random() * imagens.length);
            const frase = frases[fraseIndex];
            const imagem = imagens[imagemIndex];

            document.getElementById("frase-texto").innerText = frase;
            document.getElementById("frase-imagem").src = imagem;
        }

        // Inicialização
        updateTimeLeftToday();
        updateRemainingHours();
        updateEndDate();
        alternarCoresTitulo();
        exibirFraseDoDia();

        // Atualizar o tempo restante para o fim do expediente a cada minuto
        setInterval(updateTimeLeftToday, 60000);
        setInterval(updateRemainingHours, 60000);

    </script>

</body>
</html>
